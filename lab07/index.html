<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
    <meta charset="utf-8">
    <title>Lab 7</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@900&display=swap');

        h1, div {
          background-color: rgba(255, 255, 0, 0.1);
          font-family: 'Noto Serif JP', serif;
          font-size: 24pt;
          border: solid 1px black;
          width: 90%;
          margin: 5px auto;
          padding: 10px;
        }

        div {
          font-size: 12pt;    
        }

        video:hover {
            box-shadow: 0 0 2px 1px rgba(0, 140, 186, 0.5);
        }
    </style>
  <script src="https://d3js.org/d3.v6.min.js" charset="utf-8"></script> <!-- v6.5.0 --> 
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <h1>
        lab07 漢字變形 Path Transitions
    </h1>
    <div>
      限定使用 D3.js，參考以下影片。
    	<ul>
    		<li><a href="https://bocoup.com/blog/improving-d3-path-animation">Improving D3 Path Animation</a></li>
    		<li><a href="https://bost.ocks.org/mike/path/">https://bost.ocks.org/mike/path/</a></li>
    	</ul>
    </div>
    
    <div id = "area1">
      展示區 (姓名)
      <hr>
      <object width="256" data="./紀.svg"></object>
      <object width="256" data="./伯.svg" ></object>
      <object width="256" data="./燁.svg" ></object>
      <hr>

    </div>
    <div id = "area2">
      <hr>

    </div>
    <div id = "area3">
      Drag and Drop 展示區 (接收任何SVG)
    </div>

    <script src="https://unpkg.com/d3-interpolate-path/build/d3-interpolate-path.min.js"></script>
    <script type="text/javascript">
      // Your beautiful D3 code will go here
      var circle = d3.line()([[11.000122215598822, 148.99304205551744], [11.164534509181976, 143.99559837579727], [11.484642371535301, 139.0169434696436], [11.967177733778954, 134.03897811472416], [12.616636857390404, 129.07768465578556], [13.435843467712402, 124.14831638336182], [14.428741216659546, 119.25259232521057], [15.602584600448608, 114.37965226173401], [16.94781470298767, 109.58141922950745], [18.481131553649902, 104.80908298492432], [20.18942427635193, 100.11301827430725], [22.07269287109375, 95.49322509765625], [24.142000138759613, 90.92648082971573], [26.376122415065765, 86.4596238732338], [28.785220563411713, 82.06903845071793], [31.34864340722561, 77.7877900749445], [34.07701788842678, 73.5924661308527], [36.953460454940796, 69.50375199317932], [39.973985612392426, 65.51991039514542], [43.125993490219116, 61.64947152137756], [46.422420501708984, 57.87002944946289], [49.82265132665634, 54.21996980905533], [53.35276424884796, 50.66355296969414], [56.979971677064896, 47.23681067675352], [60.72980955243111, 43.923195354640484], [64.5843859910965, 40.74583575129509], [68.54550182819366, 37.70868369936943], [72.62581169605255, 34.808313339948654], [76.80567169189453, 32.064008712768555], [81.08631134033203, 29.47846794128418], [85.46896660327911, 27.05440327525139], [89.93154954910278, 24.80573546886444], [94.47406017780304, 22.732464522123337], [99.09649848937988, 20.834590435028076], [103.79886448383331, 19.11211320757866], [108.55617344379425, 17.57259675860405], [113.36718940734863, 16.21332883834839], [118.23068284988403, 15.031611323356628], [123.119225025177, 14.029644846916199], [128.05700027942657, 13.198109120130539], [133.01580095291138, 12.537495493888855], [137.97954776883125, 12.043714635074139], [142.9730854332447, 11.70889537781477], [147.96649932861328, 11.529783248901367], [152.96180427074432, 11.551591843366623], [157.95643424987793, 11.759231090545654], [162.95062205195427, 12.123819403350353], [167.9279831647873, 12.650115936994553], [172.87288999557495, 13.341218829154968], [177.79662120342255, 14.203573435544968], [182.6967692375183, 15.242462992668152], [187.54558563232422, 16.456388473510742], [192.34184730052948, 17.848033875226974], [197.08432471752167, 19.420097321271896], [201.77178192138672, 21.175291061401367], [206.37931144237518, 23.10588166117668], [210.90691328048706, 25.21186912059784], [215.35458743572235, 27.49325343966484], [219.72233390808105, 29.950034618377686], [223.97713586688042, 32.561079017817974], [228.13164472579956, 35.329819560050964], [232.19768524169922, 38.26150321960449], [236.144681930542, 41.329638957977295], [239.97505521774292, 44.52891528606415], [243.7111977338791, 47.87258431315422], [247.3150919675827, 51.31929036974907], [250.82021787762642, 54.892989695072174], [254.20689514279366, 58.57585960626602], [257.4683554470539, 62.36849457025528], [260.5912374332547, 66.26267649233341], [263.5792294740677, 70.27078652381897], [266.4197671711445, 74.38426357507706], [269.10880333930254, 78.60484947264194], [271.6359572708607, 82.92304331064224], [273.99265053868294, 87.32856851816177], [276.1775128915906, 91.82201482355595], [278.18424141407013, 96.3921263217926], [280.01730731129646, 101.0509472489357], [281.6673102453351, 105.77458621561527], [283.13206747174263, 110.5500140786171], [284.4174157381058, 115.38868737220764], [285.51941687613726, 120.264363899827], [286.44212866574526, 125.17529727518559], [287.18957710266113, 130.11975479125977], [287.7644353583455, 135.08261741697788], [288.1719725430012, 140.0616174340248], [288.4178582429886, 145.06828331947327], [288.4873229265213, 150.05615401268005], [288.33297634869814, 155.06031082570553], [288.0192382633686, 160.05174297094345], [287.5409243181348, 165.0282192081213], [286.8927936553955, 169.98748397827148], [286.07194355130196, 174.91431945562363], [285.0715260505676, 179.81974697113037], [283.89273881912226, 184.676344871521], [282.53286960721016, 189.4829458594322], [280.9891920387745, 194.238376557827], [279.2636310532689, 198.92949686944485], [277.3599362373352, 203.5439519882202], [275.272526293993, 208.09330838918686], [273.0121058896184, 212.55423603951928], [270.58004880696535, 216.9273261874914], [267.9846768453717, 221.2021918147802], [265.23611879348755, 225.36922359466553], [262.3305826857686, 229.44075809419155], [259.27905548363924, 233.40755532681942], [256.09427816420794, 237.26113019883633], [252.7815339639783, 241.00375650823116], [249.34604961425066, 244.63768373429775], [245.79904174804688, 248.15796661376953], [242.13483116030693, 251.56589902192354], [238.35724532604218, 254.84981873631477], [234.47437858581543, 257.99629259109497], [230.48442527651787, 261.00135815888643], [226.38556525111198, 263.86102122813463], [222.1759638786316, 266.5712558031082], [217.87637281417847, 269.11520874500275], [213.474667429924, 271.4974689781666], [208.99303436279297, 273.70433235168457], [204.43147361278534, 275.7357988655567], [199.78998517990112, 277.591868519783], [195.06856906414032, 279.2725413143635], [190.30484959483147, 280.7667945101857], [185.4879311323166, 282.0819139778614], [180.60609138011932, 283.2233715355396], [175.69939601421356, 284.1855018436909], [170.77026546001434, 284.97361639142036], [165.80754658579826, 285.5944359973073], [160.8267650604248, 286.0508351325989], [155.84420776367188, 286.3473587036133], [150.84864377975464, 286.49055683612823], [145.8460958302021, 286.41276670247316], [140.85398018360138, 286.1684141457081], [135.86292469501495, 285.7657563984394], [130.88927471637726, 285.2001202404499], [125.96183443069458, 284.4706879854202], [121.02972459793091, 283.56432831287384], [116.14782631397247, 282.4853906929493], [111.31735622882843, 281.23120525479317], [106.52713277935982, 279.7951135709882], [101.7912026643753, 278.17748668789864], [97.12279558181763, 276.3804885149002], [92.53431618213654, 274.40809348225594], [88.02576446533203, 272.2603015899658], [83.59714043140411, 269.93711283802986], [79.25960686802864, 267.44522685557604], [75.02350151538849, 264.7931537926197], [70.88759163022041, 261.9835988357663], [66.8506509065628, 259.0192530453205], [62.93215587735176, 255.9197677448392], [59.12969255447388, 252.69044029712677], [55.430920124053955, 249.32715618610382], [51.84389877319336, 245.84368515014648], [48.363656505942345, 242.24252472817898], [45.00267547369003, 238.53328889608383], [41.77456325292587, 234.72406858205795], [38.67518609762192, 230.80264323949814], [35.709788262844086, 226.76672691106796], [32.897945165634155, 222.63583159446716], [30.242320775985718, 218.40879607200623], [27.739349707961082, 214.07315205037594], [25.410453736782074, 209.66162914037704], [23.239608764648438, 205.1391448974609], [21.2553231716156, 200.56338477134705], [19.441576346755028, 195.89926479756832], [17.80769346654415, 191.17076502740383], [16.355857953429222, 186.39095614850518], [15.08028793334961, 181.5483360290527], [13.984929502010345, 176.66922944784164], [13.067992210388184, 171.76843929290771], [12.320663452148438, 166.82176208496094], [11.742992162704468, 161.85722136497498], [11.329789876937866, 156.8770787715912], [11.075923919677734, 151.88357162475586]]);
      var chi = "M125 85q1 3 4 6q1 2 1 3q11 -1 18 -6q10 -17 14 -32v-3h-3q-17 8 -29 7q-4 0 -4 -1t4 -2q20 -5 28 -13q5 -5 11 -2l12 8q4 6 -3 8q-6 1 -8 5q-3 8 -14 22q2 -1 8 -1q4 1 1 5q-6 5 -18 6q-5 1 -10 3q-2 1 -6 1l-2 -1q-13 20 -8 48q3 24 24 29q15 4 37 3q24 -1 39 -6 q8 -2 7 -8q-1 -21 -2 -33q-1 -3 0 -3q2 -1 3 1q1 18 14 35q4 7 -1 8q-61 17 -100 6q-23 -7 -25 -32q-3 -29 3 -50q2 -7 2 -11q0 -2 3 0zM68 27q10 8 5 12q-14 28 -25 66q15 -7 27 -17q11 -21 16 -29q2 -3 3 -3t5 4q3 4 0 5q-26 23 -38 73q5 -2 12 -9q2 -2 1 1q-4 6 -12 14 q-4 3 -5 0q-3 -2 0 -4q-1 0 0 -1t1 -2q6 -22 14 -41q-26 17 -30 24q-4 5 -7 1q-5 -6 0 -9q2 -2 8 -5q10 -32 18 -59q4 -12 4 -18q-1 -4 -1 -5q1 0 4 2zM81 117q3 1 7 4h2q1 2 0 4q-3 2 -15 12q-5 3 -2 -1l8 -12q1 -2 -1 -5q-4 -3 1 -2zM92 152q3 3 6 4q13 8 16 11q0 8 -6 6 q-8 -5 -10 -12q-2 -2 -7 -8q-3 -3 1 -1zM74 167q6 2 12 10q1 3 1 4q-1 1 -3 1q-8 1 -13 -11q-1 -2 -1 -3q1 -1 4 -1zM47 179q-1 9 2 6q2 -2 3 -1q1 0 1 3q0 2 -1 3q0 5 2 7q-2 5 -5 3q-7 -3 -4 -21q2 -5 2 0z"
      var bo =  "M159 1q10 6 18 12q3 4 -2 9q-1 2 -4 5q-4 5 -6 8q-18 27 -40 48q9 3 13 8q1 2 0 4q-4 5 -5 16q-2 16 -1 48q-1 6 6 17q37 -10 48 -9q3 0 2 5q-3 6 -8 3h-6t-13 1q-5 2 -14 3q-5 1 -6 1q1 3 5 6l3 3q0 3 -4 5q-8 -2 -14 -10q-2 -3 -6 -7q-2 0 0 -4q0 -1 1 -2q3 -3 2 -16q-1 -9 -1 -20q0 -10 1 -20q0 -10 -1 -19q1 -8 -13 -3q-3 2 -2 0q0 -4 2 -8l3 -1q-4 0 2 -1q24 -25 39 -61q7 -15 -1 -19q-2 -2 2 -2zM82 21q-3 -3 2 -2q11 10 19 20q3 1 0 5q-7 8 -15 22q-5 23 -8 51q-2 30 -2 53 q0 17 8 26q11 11 13 17q1 4 -4 5q-8 0 -9 -5q-5 -9 -17 -17 q-6 -3 -2 -11q0 -5 8 -7q-2 -18 -1 -53q1 -29 4 -48q-43 55 -66 71q-3 2 -4 2q-1 -1 1 -3q37 -38 74 -102q10 -12 -1 -24zM181 67q7 -1 15 4q20 13 27 20q1 3 -2 4q-13 -4 -13 21q-2 34 -7 75q-1 4 -1 9q-1 4 0 6q0 2 -2 4q-5 2 -8 -4q-3 -3 -7 -8q-6 -5 -11 -16q0 -2 1 -1 q0 1 2 3q7 6 13 7q7 3 8 -3q7 -48 2 -99q-3 -19 -18 -16q-16 3 -26 7q-10 5 -14 3q-5 1 -1 -1q10 -8 42 -15zM164 118q1 -1 4 -2q8 -1 14 0q1 1 3 4q-1 1 -2 1q-4 3 -7 3q-8 2 -19 10q-5 3 -4 0q3 -4 3 -5t-2 -1q-10 4 -16 2q-2 0 -2 -1q1 0 1 -1h2q24 -7 25 -10z"
      var ye =  "M148 146v-27q-2 1 -5 2q-21 5 -37 11q-9 4 -21 1q-5 -1 0 -2q10 0 20 -4q31 -8 43 -11v-24q-4 2 -9 3q-5 2 -8 3q1 8 2 14q-3 6 -6 1q-1 -1 -2 -5q-1 -6 -1 -8q-7 2 -15 5q-7 2 -14 1q-2 -1 -1 -2l2 -1q12 -1 27 -7q-2 -8 -5 -13q-3 -4 2 -2q7 3 11 13q2 -1 9 -2 q4 -1 8 -3q-1 -13 -1 -20v-10q-2 -3 2 -1q9 7 8 10q-3 3 -2 9q-1 1 -1 5v5q5 -1 15 -4q7 -2 11 -3q5 -13 -5 -20q-3 -1 -2 -2t4 -1q19 8 13 21q11 -4 14 -10t10 -3q4 1 8 5q1 2 1 3q-1 1 -3 1q-17 1 -33 9q-1 1 -2 3q-15 20 -27 28q25 -5 52 -9q0 -9 9 -7q12 4 24 10 q4 5 -3 7q-16 -6 -32 -5q-16 0 -54 8q-2 10 -1 27q13 -2 24 -4q0 -4 2 -5l1 -1q4 -1 5 0q1 3 5 2q6 2 13 6q2 6 -5 5q-10 -4 -19 -4q-1 1 -2 1q-8 0 -24 4q-1 8 -1 18q-1 20 0 31q-1 15 7 27q2 4 0 7t-5 1q-3 -3 -5 -8q-1 -1 -1 -2q-4 -7 -8 -13q-3 -2 -2 -3q0 -2 3 -2 q6 -3 7 -8v-47q-15 5 -26 7q-9 3 -14 0q-3 -1 1 -2q5 1 12 -1q3 -1 5 -2q4 -1 11 -3q6 -1 11 -3zM62 13q2 2 4 3q8 5 8 8v21v54q13 -6 22 -19q4 -6 2 -9q-1 -2 2 -1q4 2 8 6q3 4 -1 5q-1 1 -2 1q-2 1 -4 3q-15 13 -27 16q1 80 -47 106q-3 1 -4 0q0 -1 2 -3q28 -22 36 -57 q9 -35 5 -112q-1 -18 -5 -21q-2 -3 1 -1zM163 -11q7 0 13 7q6 4 -5 22q10 -3 12 -6q4 -6 9 -5q9 2 16 4q1 1 1 3q-1 1 -2 1q-12 2 -39 8q-10 14 -20 26q11 0 29 -6q2 -6 4 -6q7 1 17 8q-1 8 -7 6q-5 -6 -20 -4q-25 5 -43 12l-8 2q-8 3 -15 0q-4 -1 1 -2q9 0 25 -5 q6 -2 10 -3q1 -2 2 -3q9 -12 16 -23q-19 7 -26 10q1 9 -1 12q-2 2 -3 -1q-3 -5 -4 -8q-8 2 -18 0q-4 -1 1 -2h2q9 -3 13 -5l-4 -14q-2 -4 2 -2q7 7 10 14q-1 1 30 -9q13 -27 1 -28q-3 0 -2 -1q0 -1 3 -2zM82 141q-2 -4 1 -2q24 14 28 29q1 4 1 5t-2 0q-9 -1 -11 -5l-8 -14 q-5 -5 -9 -13zM59 102q6 -2 1 2q-16 14 -18 21q-3 5 -6 0q-5 -10 -1 -14q7 -2 8 -13q0 -2 2 -3q1 1 2 3q0 3 -1 8q0 4 3 2q3 -1 10 -6zM177 85q-5 2 -12 3q-7 2 -11 3v22q14 -13 23 -28z"

      var svgchi = d3.select("#area2")
                  .append("svg")
                  .attr("width",300)
                  .attr("height",300)
      var svgbo = d3.select("#area2")
                  .append("svg")
                  .attr("width",300)
                  .attr("height",300)
      var svgye =  d3.select("#area2")
                  .append("svg")
                  .attr("width",300)
                  .attr("height",300)
      nameAnimation(svgchi,chi)
      nameAnimation(svgbo,bo)
      nameAnimation(svgye,ye)
      
      function nameAnimation(svg,name){
        svg.append('path')
        .attr('d',circle)
        .attr('fill','none')
        .attr('stroke','#000')
        .transition()
        .duration(3000)    
        .on("start", function repeat() {
        d3.active(this)
            .attrTween("d", pathTween(circle, 4))
            .transition()
            .delay(200)
            .duration(3000)
            .attrTween("d", pathTween(name, 4))
            .transition()
            .delay(200)
            .duration(3000)
            .on("start", repeat);
      });


      function pathTween(d1, precision) {
      return function() {
        var path0 = this,
        path1 = path0.cloneNode(),
        n0 = path0.getTotalLength(),
        n1 = (path1.setAttribute("d", d1), path1).getTotalLength();

        // Uniform sampling of distance based on specified precision.
        var distances = [0], i = 0, dt = precision / Math.max(n0, n1);
        while ((i += dt) < 1) distances.push(i);
        distances.push(1);

        // Compute point-interpolators at each distance.
        var points = distances.map(function(t) {
          var p0 = path0.getPointAtLength(t * n0),
              p1 = path1.getPointAtLength(t * n1);
          return d3.interpolate([p0.x, p0.y], [p1.x, p1.y]);
        });

        return function(t) {
          return t < 1 ? "M" + points.map(function(p) { return p(t); }).join("L") : d1;
        };
      };
    }      
  };
  
      


    </script>
  </html>